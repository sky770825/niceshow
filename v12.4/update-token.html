<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ›´æ–° GitHub Token</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Microsoft JhengHei', sans-serif;
            max-width: 500px;
            margin: 50px auto;
            padding: 2rem;
            background: #f8fafc;
        }
        .container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .success {
            background: #d1fae5;
            color: #065f46;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            border: 1px solid #a7f3d0;
        }
        .btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background: #059669;
        }
        .token-info {
            background: #f3f4f6;
            padding: 0.5rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.875rem;
            margin: 1rem 0;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”‘ GitHub Token æ›´æ–°</h1>
        
        <div class="success">
            âœ… æ‚¨çš„ Token é©—è­‰æˆåŠŸï¼<br>
            ä½¿ç”¨è€…: sky770825<br>
            æ¬Šé™: repo (å®Œæ•´å€‰åº«å­˜å–æ¬Šé™)
        </div>
        
        <p>æ­£åœ¨è¨­å®šæ‚¨çš„ GitHub Token...</p>
        
        <div class="token-info" id="tokenInfo">
            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
        </div>
        
        <div id="status"></div>
        
        <div>
            <a href="admin.html" class="btn">ğŸ  å›åˆ°ç®¡ç†å¾Œå°</a>
            <button class="btn" onclick="testSync()">ğŸ§ª æ¸¬è©¦åŒæ­¥åŠŸèƒ½</button>
        </div>
        
        <div id="testResult"></div>
    </div>

    <script>
        // æ–°çš„æœ‰æ•ˆ Token
        const newToken = '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';
        
        // è¨­å®š Token
        function setToken() {
            try {
                localStorage.setItem('githubToken', newToken);
                document.getElementById('status').innerHTML = '<div class="success">âœ… Token å·²æˆåŠŸå„²å­˜åˆ°ç³»çµ±ä¸­ï¼</div>';
                return true;
            } catch (error) {
                document.getElementById('status').innerHTML = `<div style="background:#fee2e2;color:#991b1b;padding:1rem;border-radius:6px;margin:1rem 0;">âŒ å„²å­˜å¤±æ•—: ${error.message}</div>`;
                return false;
            }
        }
        
        // æ¸¬è©¦åŒæ­¥åŠŸèƒ½
        async function testSync() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = '<div style="background:#dbeafe;color:#1e40af;padding:1rem;border-radius:6px;margin:1rem 0;">ğŸ”„ æ­£åœ¨æ¸¬è©¦åŒæ­¥åŠŸèƒ½...</div>';
            
            try {
                // æ¸¬è©¦ GitHub API é€£ç·š
                const response = await fetch('https://api.github.com/user', {
                    headers: {
                        'Authorization': `token ${newToken}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                if (response.ok) {
                    const user = await response.json();
                    resultDiv.innerHTML = `<div class="success">âœ… åŒæ­¥åŠŸèƒ½æ¸¬è©¦æˆåŠŸï¼<br>ä½¿ç”¨è€…: ${user.login}<br>ç¾åœ¨å¯ä»¥ä½¿ç”¨ã€Œå„²å­˜ä¸¦åŒæ­¥ã€åŠŸèƒ½äº†</div>`;
                } else {
                    resultDiv.innerHTML = `<div style="background:#fee2e2;color:#991b1b;padding:1rem;border-radius:6px;margin:1rem 0;">âŒ æ¸¬è©¦å¤±æ•—: ${response.status} ${response.statusText}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div style="background:#fee2e2;color:#991b1b;padding:1rem;border-radius:6px;margin:1rem 0;">âŒ æ¸¬è©¦å¤±æ•—: ${error.message}</div>`;
            }
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•è¨­å®š Token
        document.addEventListener('DOMContentLoaded', function() {
            setToken();
        });
    </script>
</body>
</html>
