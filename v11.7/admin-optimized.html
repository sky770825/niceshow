<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>餐車圖片管理後台</title>
    <link rel="stylesheet" href="admin-optimized.css">
</head>
<body>
    <div class="admin-container">
        <!-- 標題區 -->
        <div class="admin-header">
            <div class="admin-header-content">
                <h1>餐車圖片管理後台</h1>
                <p>智能管理系統 - 拖曳排序、批量操作、即時同步</p>
            </div>
        </div>

        <!-- 主要內容區 -->
        <div class="admin-content">
            <!-- 搜尋和篩選區域 -->
            <div class="search-filter-section">
                <h2 class="section-title">
                    <span>🔍</span>
                    搜尋與篩選
                </h2>
                <div class="search-filter-row">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="搜尋餐車名稱或描述...">
                        <span class="search-icon">🔍</span>
                    </div>
                    <select id="statusFilter" class="filter-select">
                        <option value="all">全部狀態</option>
                        <option value="active">已上架</option>
                        <option value="inactive">已下架</option>
                    </select>
                    <select id="sortBy" class="filter-select">
                        <option value="priority">按優先級</option>
                        <option value="title">按名稱</option>
                        <option value="id">按ID</option>
                    </select>
                    <button class="btn btn-primary" onclick="applyFilters()">篩選</button>
                    <button class="btn btn-secondary" onclick="clearFilters()">清除</button>
                </div>
            </div>

            <!-- 批量操作區域 -->
            <div id="batchActions" class="batch-actions">
                <div class="batch-actions-content">
                    <span class="batch-count">已選擇 <span id="selectedCount">0</span> 個餐車</span>
                    <button class="btn btn-success btn-sm" onclick="batchToggle(true)">批量上架</button>
                    <button class="btn btn-warning btn-sm" onclick="batchToggle(false)">批量下架</button>
                    <button class="btn btn-danger btn-sm" onclick="batchDelete()">批量刪除</button>
                    <button class="btn btn-secondary btn-sm" onclick="clearSelection()">取消選擇</button>
                </div>
            </div>

            <!-- 餐車網格 -->
            <div id="truckGrid" class="truck-grid">
                <!-- 餐車卡片將在這裡動態生成 -->
            </div>

            <!-- 新增餐車表單 -->
            <div class="form-section">
                <h2 class="form-section-title">
                    <span>➕</span>
                    新增餐車
                </h2>
                <p class="form-section-description">
                    填寫下方表單來新增餐車到系統中。所有欄位都是必填的。
                </p>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            <span class="label-icon">📝</span>
                            餐車名稱
                        </label>
                        <input type="text" id="newTruckTitle" class="form-input" placeholder="輸入餐車名稱">
                        <div class="input-hint">這將顯示在餐車卡片上</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <span class="label-icon">🖼️</span>
                            圖片網址
                        </label>
                        <input type="url" id="newTruckSrc" class="form-input" placeholder="https://example.com/image.jpg">
                        <div class="input-hint">請輸入有效的圖片網址</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <span class="label-icon">📄</span>
                            描述文字
                        </label>
                        <input type="text" id="newTruckAlt" class="form-input" placeholder="餐車描述或備註">
                        <div class="input-hint">用於圖片替代文字和搜尋</div>
                    </div>
                </div>

                <!-- 連結設定區域 -->
                <div class="links-container">
                    <div class="link-column">
                        <div class="link-header">
                            <div class="link-number">1</div>
                            <div class="link-title">第一個連結</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結文字</label>
                            <input type="text" id="newLink1Text" class="form-input" placeholder="例如：官方網站">
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結網址</label>
                            <input type="url" id="newLink1Url" class="form-input" placeholder="https://example.com">
                        </div>
                    </div>
                    
                    <div class="link-column">
                        <div class="link-header">
                            <div class="link-number">2</div>
                            <div class="link-title">第二個連結</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結文字</label>
                            <input type="text" id="newLink2Text" class="form-input" placeholder="例如：菜單">
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結網址</label>
                            <input type="url" id="newLink2Url" class="form-input" placeholder="https://example.com/menu">
                        </div>
                    </div>
                    
                    <div class="link-column">
                        <div class="link-header">
                            <div class="link-number">3</div>
                            <div class="link-title">第三個連結</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結文字</label>
                            <input type="text" id="newLink3Text" class="form-input" placeholder="例如：聯絡方式">
                        </div>
                        <div class="form-group">
                            <label class="form-label">連結網址</label>
                            <input type="url" id="newLink3Url" class="form-input" placeholder="https://example.com/contact">
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 1.5rem;">
                    <button class="btn btn-primary" onclick="addNewTruck()">新增餐車</button>
                    <button class="btn btn-secondary" onclick="clearForm()">清除表單</button>
                </div>
            </div>

            <!-- 操作按鈕區域 -->
            <div class="form-section">
                <h2 class="form-section-title">
                    <span>⚙️</span>
                    系統操作
                </h2>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                    <button class="btn btn-primary" onclick="manualSaveData()">儲存並同步</button>
                    <button class="btn btn-success" onclick="saveFoodTruckData()">匯出資料</button>
                    <button class="btn btn-warning" onclick="loadFoodTruckData(true)">重新載入</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 圖片預覽模態框 -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="hideImageModal()">&times;</button>
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <!-- 通知區域 -->
    <div id="alertMessage" class="alert" style="display: none;"></div>
    <div id="syncStatus" class="sync-status" style="display: none;">
        <span id="syncMessage">同步中...</span>
    </div>

    <!-- 載入外部 JavaScript -->
    <script src="admin-optimized.js"></script>
</body>
</html>
